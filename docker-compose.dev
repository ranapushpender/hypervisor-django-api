version: "3.4"
services:
  api:
    build: ./hypervisor
    ports:
      - 8000:8000
    volumes:
      - /var/run/libvirt:/var/run/libvirt
      - ./hypervisor:/src/app
      - /usr/bin/docker:/usr/bin/docker
      - /var/run/docker.sock:/var/run/docker.sock
      - /home/pushpender:/home/pushpender"
    environment:
      - BASE_PATH=/home/pushpender/Projects/hypervisor-django-api/hypervisor
  websockify:
    build: ./websockify
    ports:
      - 6080:6080
    volumes:
      - ./websockify:/src/app
    network_mode: host
  terminal:
    build: ./docker-console
    ports:
      - 8766:8766
    volumes:
      - ./docker-console/console:/src/app
      - /var/run/docker.sock:/var/run/docker.sock
